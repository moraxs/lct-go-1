var oe=Object.defineProperty,ae=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var K=(l,s,o)=>s in l?oe(l,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[s]=o,W=(l,s)=>{for(var o in s||(s={}))le.call(s,o)&&K(l,o,s[o]);if(J)for(var o of J(s))ie.call(s,o)&&K(l,o,s[o]);return l},X=(l,s)=>ae(l,ne(s));var U=(l,s,o)=>new Promise((e,w)=>{var O=r=>{try{p(o.next(r))}catch(b){w(b)}},M=r=>{try{p(o.throw(r))}catch(b){w(b)}},p=r=>r.done?e(r.value):Promise.resolve(r.value).then(O,M);p((o=o.apply(l,s)).next())});/* empty css              *//* empty css              *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import{a1 as ce,a6 as re,r as d,c as Y,o as de,aj as ue,ak as me,ap as pe,y as _e,aq as he,ar as ve,as as fe,aa as B,D as i,G as L,am as c,w as Z,H as h,I as y,A as n,B as N,C as m,z as T,F as $,a9 as E,L as j,at as ye}from"./index.83cbf7da.js";import{M as ee,S as Me}from"./SubMission.1d124604.js";const be={setup(){const l=[{title:"Head Icon ID",dataIndex:"headIcon",key:"headIcon"},{title:"UID",dataIndex:"uid",key:"uid"},{title:"Name",dataIndex:"name",key:"name"},{title:"Level",dataIndex:"level",key:"level"}],s=re([]),o=d(""),e=d(""),w=d(!1),O=d(!0),M=d(""),p=()=>U(this,null,function*(){try{const _=(yield L.get("https://lctweb.ates.top/api/status")).data.onlinePlayers.map(u=>X(W({},u),{uid:String(u.uid),headIcon:u.headIcon}));s.push(..._)}catch(a){console.error("Error fetching status:",a)}}),r=Y(()=>e.value?s.filter(a=>a.uid.includes(e.value)):s),b=Y(()=>r.value.length),x=()=>{e.value=o.value},C=a=>a.uid===e.value?"highlight-row":"",z=a=>{M.value=a.uid,localStorage.setItem("uid",a.uid),w.value=!0,se(a.uid)};de(p);const P=d(!0),t="",v=d(null),g=d(null),k=d(null),F=d([]),q=d([]),H=d([]),se=a=>U(this,null,function*(){const _="https://lctweb.ates.top/api/command",u="mhfude";if(!a){c.info("\u7528\u6237\u672A\u767B\u5F55\uFF0C\u8BF7\u91CD\u8BD5");return}try{const R=(yield L.post(_,new URLSearchParams({command:"mission running",adminpass:u,uid:a}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data;if(R.retcode!==0){c.error("\u83B7\u53D6\u4EFB\u52A1\u4FE1\u606F\u5931\u8D25");return}const te=R.data.missioninfo,V={};te.forEach(S=>{var A,G;const I=S.mainMission.toString(),D=((A=ee[I])==null?void 0:A.typename)||"\u672A\u77E5\u7C7B\u578B";V[D]||(V[D]=[]),V[D].push({value:I,label:((G=ee[I])==null?void 0:G.text)||"\u672A\u77E5\u4EFB\u52A1",children:S.subMissions.map(Q=>({value:Q.toString(),label:Me[Q.toString()]||"\u672A\u77E5\u5B50\u4EFB\u52A1"}))})}),F.value=Object.keys(V),Z(v,S=>{q.value=V[S]||[],g.value=null,k.value=null}),Z(g,S=>{const I=q.value.find(D=>D.value===S);H.value=I?I.children:[],k.value=null})}catch(f){c.error("\u8BF7\u6C42\u5931\u8D25"),console.error(f)}});return{columns:l,data:s,searchUID:o,searchQuery:e,handleSearch:x,filteredData:r,onlineCount:b,isModalVisible:w,isMaskVisible:O,rowClassName:C,onRowClick:z,showNotice:P,noticeContent:t,selectedType:v,selectedMainMission:g,selectedSubMission:k,typeOptions:F,mainMissionOptions:q,subMissionOptions:H,completeMainMission:()=>U(this,null,function*(){const a=localStorage.getItem("address"),_=localStorage.getItem("adminpass"),u=M.value;if(!a||!_||!u){c.info("\u7528\u6237\u672A\u767B\u5F55\uFF0C\u8BF7\u91CD\u8BD5");return}if(!g.value){c.info("\u8BF7\u9009\u62E9\u4E00\u4E2A\u4E3B\u4EFB\u52A1");return}console.log("Selected Main Mission ID:",g.value);try{(yield L.post(a,new URLSearchParams({command:`mission finish ${g.value}`,adminpass:_,uid:u}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data.retcode===0?c.success("\u4E3B\u4EFB\u52A1\u5B8C\u6210\u6210\u529F"):c.error("\u4E3B\u4EFB\u52A1\u5B8C\u6210\u5931\u8D25")}catch(f){c.error("\u8BF7\u6C42\u5931\u8D25"),console.error(f)}}),completeSubMission:()=>U(this,null,function*(){const a=localStorage.getItem("address"),_=localStorage.getItem("adminpass"),u=M.value;if(!a||!_||!u){c.info("\u7528\u6237\u672A\u767B\u5F55\uFF0C\u8BF7\u91CD\u8BD5");return}if(!k.value){c.info("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5B50\u4EFB\u52A1");return}console.log("Selected Sub Mission ID:",k.value);try{(yield L.post(a,new URLSearchParams({command:`mission finish ${k.value}`,adminpass:_,uid:u}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data.retcode===0?c.success("\u5B50\u4EFB\u52A1\u5B8C\u6210\u6210\u529F"):c.error("\u5B50\u4EFB\u52A1\u5B8C\u6210\u5931\u8D25")}catch(f){c.error("\u8BF7\u6C42\u5931\u8D25"),console.error(f)}})}}},we={style:{float:"right"}},ge={style:{"margin-bottom":"20px"}},ke={class:"table-container"},Se={key:0,class:"scrolling-notice"},Ie={class:"commuse"},xe={class:"commuse-item"},Ce=n("div",{class:"text-slate-900 dark:text-slate-100"},"\u4EFB\u52A1\u7C7B\u578B:",-1),Ve={class:"select-container"},De={class:"commuse-item"},Ue=n("div",{class:"text-slate-900 dark:text-slate-100"},"\u4E3B\u4EFB\u52A1:",-1),Ne={class:"select-container"},Te={class:"commuse-item"},Oe=n("div",{class:"text-slate-900 dark:text-slate-100"},"\u5B50\u4EFB\u52A1:",-1),Re={class:"select-container"},Be={class:"button-group"},Le={key:0,class:"mask"},ze=n("div",{class:"mask-content"}," \u76E3\u4FEE\u4E2D... ",-1),Pe=[ze];function qe(l,s,o,e,w,O){const M=ue,p=me,r=pe,b=_e("marquee"),x=ye,C=he,z=ve,P=fe;return h(),B(P,{class:"wider-card content-container"},{title:i(()=>[y(" \u73A9\u5BB6\u7BA1\u7406 "),n("span",we,"\u5728\u7EBF\u4EBA\u6570: "+N(e.onlineCount),1)]),default:i(()=>[n("div",ge,[m(M,{modelValue:e.searchUID,"onUpdate:modelValue":s[0]||(s[0]=t=>e.searchUID=t),placeholder:"\u8F93\u5165UID\u641C\u7D22",style:{width:"300px","margin-right":"10px"}},null,8,["modelValue"]),m(p,{type:"primary",onClick:e.handleSearch},{default:i(()=>[y("\u641C\u7D22")]),_:1},8,["onClick"])]),n("div",ke,[m(r,{columns:e.columns,data:e.filteredData,"row-key":"uid","row-class-name":e.rowClassName,onRowClick:e.onRowClick},null,8,["columns","data","row-class-name","onRowClick"])]),m(z,{visible:e.isModalVisible,"onUpdate:visible":s[4]||(s[4]=t=>e.isModalVisible=t),title:"\u4EFB\u52A1\u4FE1\u606F",footer:null},{default:i(()=>[n("div",null,[e.showNotice?(h(),T("div",Se,[m(b,{behavior:"scroll",direction:"left"},{default:i(()=>[y(N(e.noticeContent),1)]),_:1})])):$("",!0),n("div",Ie,[n("div",xe,[Ce,n("div",Ve,[m(C,{modelValue:e.selectedType,"onUpdate:modelValue":s[1]||(s[1]=t=>e.selectedType=t),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B"},{default:i(()=>[(h(!0),T(j,null,E(e.typeOptions,(t,v)=>(h(),B(x,{key:v,value:t},{default:i(()=>[y(N(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),n("div",De,[Ue,n("div",Ne,[m(C,{modelValue:e.selectedMainMission,"onUpdate:modelValue":s[2]||(s[2]=t=>e.selectedMainMission=t),placeholder:"\u8BF7\u9009\u62E9\u4E3B\u4EFB\u52A1",disabled:!e.selectedType},{default:i(()=>[(h(!0),T(j,null,E(e.mainMissionOptions,(t,v)=>(h(),B(x,{key:v,value:t.value},{default:i(()=>[y(N(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","disabled"])])]),n("div",Te,[Oe,n("div",Re,[m(C,{modelValue:e.selectedSubMission,"onUpdate:modelValue":s[3]||(s[3]=t=>e.selectedSubMission=t),placeholder:"\u8BF7\u9009\u62E9\u5B50\u4EFB\u52A1",disabled:!e.selectedMainMission},{default:i(()=>[(h(!0),T(j,null,E(e.subMissionOptions,(t,v)=>(h(),B(x,{key:v,value:t.value},{default:i(()=>[y(N(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","disabled"])])]),n("div",Be,[m(p,{type:"primary",shape:"round",size:"large",onClick:e.completeMainMission},{default:i(()=>[y("\u5B8C\u6210\u4E3B\u4EFB\u52A1")]),_:1},8,["onClick"]),m(p,{type:"primary",shape:"round",size:"large",onClick:e.completeSubMission},{default:i(()=>[y("\u5B8C\u6210\u5B50\u4EFB\u52A1")]),_:1},8,["onClick"])])])])]),_:1},8,["visible"]),e.isMaskVisible?(h(),T("div",Le,Pe)):$("",!0)]),_:1})}const $e=ce(be,[["render",qe]]);export{$e as default};
