var C=(f,b,c)=>new Promise((l,r)=>{var k=d=>{try{g(c.next(d))}catch(M){r(M)}},w=d=>{try{g(c.throw(d))}catch(M){r(M)}},g=d=>d.done?l(d.value):Promise.resolve(d.value).then(k,w);g((c=c.apply(f,b)).next())});/* empty css              *//* empty css               *//* empty css              *//* empty css              *//* empty css               */import{a1 as E,r as v,o as F,am as t,G as B,w as P,y as $,aq as j,ak as A,z as I,C as S,D as m,F as G,A as n,H as _,I as y,B as D,L as T,a9 as U,aa as L,av as H,aw as J,at as K}from"./index.83cbf7da.js";import{M as R,S as Q}from"./SubMission.1d124604.js";const N=f=>(H("data-v-8726edfe"),f=f(),J(),f),W={key:0,class:"scrolling-notice"},X={class:"commuse"},Y={class:"commuse-item"},Z=N(()=>n("div",{class:"text-slate-900 dark:text-slate-100"},"\u4EFB\u52A1\u7C7B\u578B:",-1)),ee={class:"select-container"},se={class:"commuse-item"},te=N(()=>n("div",{class:"text-slate-900 dark:text-slate-100"},"\u4E3B\u4EFB\u52A1:",-1)),ae={class:"select-container"},oe={class:"commuse-item"},ne=N(()=>n("div",{class:"text-slate-900 dark:text-slate-100"},"\u5B50\u4EFB\u52A1:",-1)),le={class:"select-container"},re={class:"button-group"},ie="cxfm666\u53CA\u5176\u4ED6\u4EFB\u4F55\u884D\u751F\u5DE5\u5177\u90FD\u662F\u514D\u8D39\u8F6F\u4EF6\uFF0C\u5982\u679C\u4F60\u662F\u4ED8\u8D39\u8D2D\u4E70\u7684\uFF0C\u90A3\u4F60\u5C31\u88AB\u9A97\u4E86\uFF0C\u8BF7\u53CA\u65F6\u9000\u6B3E\u5E76\u4E3E\u62A5\u3002",ce={__name:"suggest",setup(f){const b=v(!0),c=v(null),l=v(null),r=v(null),k=v([]),w=v([]),g=v([]);F(()=>C(this,null,function*(){setTimeout(()=>{b.value=!0},1e3);const u=localStorage.getItem("address"),s=localStorage.getItem("adminpass"),i=localStorage.getItem("uid");if(!u||!s||!i){t.info("\u7528\u6237\u672A\u767B\u5F55\uFF0C\u8BF7\u91CD\u8BD5");return}try{const p=(yield B.post(u,new URLSearchParams({command:"mission running",adminpass:s,uid:i}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data;if(p.retcode!==0){t.error("\u83B7\u53D6\u4EFB\u52A1\u4FE1\u606F\u5931\u8D25");return}const V=p.data.missioninfo,e={};V.forEach(o=>{var O,z;const h=o.mainMission.toString(),x=((O=R[h])==null?void 0:O.typename)||"\u672A\u77E5\u7C7B\u578B";e[x]||(e[x]=[]),e[x].push({value:h,label:((z=R[h])==null?void 0:z.text)||"\u672A\u77E5\u4EFB\u52A1",children:o.subMissions.map(q=>({value:q.toString(),label:Q[q.toString()]||"\u672A\u77E5\u5B50\u4EFB\u52A1"}))})}),k.value=Object.keys(e),P(c,o=>{w.value=e[o]||[],l.value=null,r.value=null}),P(l,o=>{const h=w.value.find(x=>x.value===o);g.value=h?h.children:[],r.value=null})}catch(a){t.error("\u8BF7\u6C42\u5931\u8D25"),console.error(a)}}));const d=()=>C(this,null,function*(){const u=localStorage.getItem("address"),s=localStorage.getItem("adminpass"),i=localStorage.getItem("uid");if(!u||!s||!i){t.info("\u7528\u6237\u672A\u767B\u5F55\uFF0C\u8BF7\u91CD\u8BD5");return}if(!l.value){t.info("\u8BF7\u9009\u62E9\u4E00\u4E2A\u4E3B\u4EFB\u52A1");return}console.log("Selected Main Mission ID:",l.value);try{(yield B.post(u,new URLSearchParams({command:`mission finish ${l.value}`,adminpass:s,uid:i}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data.retcode===0?t.success("\u4E3B\u4EFB\u52A1\u5B8C\u6210\u6210\u529F"):t.error("\u4E3B\u4EFB\u52A1\u5B8C\u6210\u5931\u8D25")}catch(a){t.error("\u8BF7\u6C42\u5931\u8D25"),console.error(a)}}),M=()=>C(this,null,function*(){const u=localStorage.getItem("address"),s=localStorage.getItem("adminpass"),i=localStorage.getItem("uid");if(!u||!s||!i){t.info("\u7528\u6237\u672A\u767B\u5F55\uFF0C\u8BF7\u91CD\u8BD5");return}if(!r.value){t.info("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5B50\u4EFB\u52A1");return}console.log("Selected Sub Mission ID:",r.value);try{(yield B.post(u,new URLSearchParams({command:`mission finish ${r.value}`,adminpass:s,uid:i}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data.retcode===0?t.success("\u5B50\u4EFB\u52A1\u5B8C\u6210\u6210\u529F"):t.error("\u5B50\u4EFB\u52A1\u5B8C\u6210\u5931\u8D25")}catch(a){t.error("\u8BF7\u6C42\u5931\u8D25"),console.error(a)}});return(u,s)=>{const i=$("marquee"),a=K,p=j,V=A;return _(),I("div",null,[b.value?(_(),I("div",W,[S(i,{behavior:"scroll",direction:"left"},{default:m(()=>[y(D(ie))]),_:1})])):G("",!0),n("div",X,[n("div",Y,[Z,n("div",ee,[S(p,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B"},{default:m(()=>[(_(!0),I(T,null,U(k.value,(e,o)=>(_(),L(a,{key:o,value:e},{default:m(()=>[y(D(e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),n("div",se,[te,n("div",ae,[S(p,{modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=e=>l.value=e),placeholder:"\u8BF7\u9009\u62E9\u4E3B\u4EFB\u52A1",disabled:!c.value},{default:m(()=>[(_(!0),I(T,null,U(w.value,(e,o)=>(_(),L(a,{key:o,value:e.value},{default:m(()=>[y(D(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","disabled"])])]),n("div",oe,[ne,n("div",le,[S(p,{modelValue:r.value,"onUpdate:modelValue":s[2]||(s[2]=e=>r.value=e),placeholder:"\u8BF7\u9009\u62E9\u5B50\u4EFB\u52A1",disabled:!l.value},{default:m(()=>[(_(!0),I(T,null,U(g.value,(e,o)=>(_(),L(a,{key:o,value:e.value},{default:m(()=>[y(D(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","disabled"])])]),n("div",re,[S(V,{type:"primary",shape:"round",size:"large",onClick:d},{default:m(()=>[y("\u5B8C\u6210\u4E3B\u4EFB\u52A1")]),_:1}),S(V,{type:"primary",shape:"round",size:"large",onClick:M},{default:m(()=>[y("\u5B8C\u6210\u5B50\u4EFB\u52A1")]),_:1})])])])}}},he=E(ce,[["__scopeId","data-v-8726edfe"]]);export{he as default};
